var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __assign = (this && this.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
import { Observable, Subject } from 'rxjs';
import { Net } from '../data/net';
import { LogLevel } from '../diagnostics/log-level';
import { Logging } from '../diagnostics/logging';
import { NotificationState } from './notification-state';
import { SocketMessageFlags, SocketSignalR } from './socket-signalr';
/**
 * The PowerShell script based notification class.
 */
var PowerShellNotification = /** @class */ (function (_super) {
    __extends(PowerShellNotification, _super);
    /* tslint:enable:no-bitwise */
    /**
     * Initializes a new instance of the GatewaySocket class.
     */
    function PowerShellNotification(gatewayUrl) {
        return _super.call(this, gatewayUrl, PowerShellNotification.connectionUrl, PowerShellNotification.proxyName) || this;
    }
    /* tslint:disable:no-bitwise */
    PowerShellNotification.hasConnectionError = function (item) {
        return (item.type & SocketMessageFlags.ConnectionError) === SocketMessageFlags.ConnectionError;
    };
    PowerShellNotification.hasError = function (item) {
        return (item.type & SocketMessageFlags.Error) === SocketMessageFlags.Error;
    };
    PowerShellNotification.hasException = function (item) {
        return (item.type & SocketMessageFlags.Exception) === SocketMessageFlags.Exception;
    };
    PowerShellNotification.hasCompleted = function (item) {
        return (item.type & SocketMessageFlags.Completed) === SocketMessageFlags.Completed;
    };
    PowerShellNotification.hasData = function (item) {
        return (item.type & SocketMessageFlags.Data) === SocketMessageFlags.Data;
    };
    PowerShellNotification.hasProgress = function (item) {
        return (item.type & SocketMessageFlags.Progress) === SocketMessageFlags.Progress;
    };
    Object.defineProperty(PowerShellNotification.prototype, "subject", {
        /**
         * Gets the subject observable to get notifications.
         */
        get: function () {
            return this.subjectInternal;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Submit PowerShell command as a work item.
     *
     * @param nodeConnection The node connection.
     * @param command The PowerShell command.
     * @param metadata The meta data.
     * @param nodeRequestOptions The node request options.
     * @param create The callback to create new notification.
     * @return Observable the observable of initial powershell query result.
     */
    PowerShellNotification.prototype.submit = function (nodeConnection, nodeName, command, metadata, nodeRequestOptions, create) {
        var _this = this;
        // For a non-powershell long running task (eg: azure site recovery setup): 
        // The 'command' parameter is null.
        // The metadata.id is the workitem id generated by a gateway api. 
        if (!command && metadata.id) {
            var result = {
                id: metadata.id,
                completed: false,
                error: null,
                state: NotificationState.Started
            };
            if (create) {
                create(result);
            }
            this.subscribeSession(metadata.id);
            return Observable.of({ id: metadata.id, state: NotificationState.Started, error: null });
        }
        var data = Net.createPropertiesJSONString(__assign({}, command, { metadata: metadata }));
        return nodeConnection.post(nodeName, Net.powerShellApiInvokeCommand, data, nodeRequestOptions)
            .catch(function (error, obj) {
            var result = {
                id: MsftSme.newGuid(),
                completed: true,
                error: { message: Net.getErrorMessage(error) },
                state: NotificationState.Error
            };
            if (create) {
                create(result);
            }
            return Observable.of({ id: result.id, state: result.state, error: result.error });
        })
            .map(function (response) {
            if (response.id) {
                // sending back the client for the error.
                return response;
            }
            var completed = response.completed === 'True';
            var error = null;
            if (response.errors && response.errors.length > 0) {
                var errorObj = MsftSme.first(response.errors);
                error = { message: errorObj.message };
            }
            var result = {
                id: response.sessionId,
                completed: completed,
                error: error,
                state: completed ?
                    (response.errors ? NotificationState.Error : NotificationState.Success)
                    : NotificationState.Started
            };
            if (create) {
                create(result);
            }
            if (!result.completed) {
                _this.subscribeSession(response.sessionId);
            }
            _this.processData(response);
            // sending back the client.
            return { id: result.id, state: result.state, error: error };
        });
    };
    /**
     * Initialize to subscribe the web socket connection.
     */
    PowerShellNotification.prototype.initialize = function () {
        if (this.subjectInternal) {
            this.subjectInternal.complete();
        }
        this.subjectInternal = new Subject();
        this.subscribe(PowerShellNotification.notify);
        return this.start();
    };
    /**
     * Uninitialize to subscribe the web socket connection.
     */
    PowerShellNotification.prototype.uninitialize = function () {
        if (this.subjectInternal) {
            this.subjectInternal.complete();
            this.subjectInternal = null;
        }
        this.unsubscribe(PowerShellNotification.notify);
        this.stop();
    };
    /**
     * Invoke subscribe method to a  session.
     *
     * @param id the session ID of work item.
     * @return Promise the promise object.
     */
    PowerShellNotification.prototype.subscribeSession = function (id) {
        return this.invoke(PowerShellNotification.subscribe, id);
    };
    /**
     * The client handler to process message.
     *
     * @param notification the message notification.
     */
    PowerShellNotification.prototype.clientHandler = function (notification) {
        this.subjectInternal.next(notification);
    };
    /**
     * Process the message.
     *
     * @param messages the messages.
     */
    PowerShellNotification.prototype.processMessage = function (message) {
        if (!message) {
            var message2 = MsftSme.resourcesStrings().MsftSmeShell.Core.Error.NotificationEmptyMessage.message;
            Logging.log({ source: 'socket', level: LogLevel.Warning, message: message2 });
            return;
        }
        var data = JSON.parse(message);
        this.processData(data);
    };
    PowerShellNotification.prototype.processData = function (data) {
        /* tslint:disable:no-bitwise */
        var type = SocketMessageFlags.None;
        if (data.results && data.results.length > 0) {
            type |= SocketMessageFlags.Data;
        }
        if (data.progress && data.progress.length > 0) {
            type |= SocketMessageFlags.Progress;
        }
        if (data.errors && data.errors.length > 0) {
            type |= SocketMessageFlags.Error;
        }
        if (data.exception) {
            type |= SocketMessageFlags.Exception;
        }
        if (data.completed === 'True') {
            type |= SocketMessageFlags.Completed;
        }
        /* tslint:enable:no-bitwise */
        this.clientHandler({ type: type, message: data });
    };
    PowerShellNotification.connectionUrl = '/api/notifications';
    PowerShellNotification.proxyName = 'notificationHub';
    PowerShellNotification.notify = 'notify';
    PowerShellNotification.subscribe = 'Subscribe';
    return PowerShellNotification;
}(SocketSignalR));
export { PowerShellNotification };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUvbm90aWZpY2F0aW9uL3Bvd2Vyc2hlbGwtbm90aWZpY2F0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE9BQU8sRUFBYSxVQUFVLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBRXRELE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFHbEMsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUNqRCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUN6RCxPQUFPLEVBQWlCLGtCQUFrQixFQUFFLGFBQWEsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBeUJwRjs7R0FFRztBQUNIO0lBQTRDLDBDQUF3QztJQWdDaEYsOEJBQThCO0lBRTlCOztPQUVHO0lBQ0gsZ0NBQVksVUFBa0I7ZUFDMUIsa0JBQU0sVUFBVSxFQUFFLHNCQUFzQixDQUFDLGFBQWEsRUFBRSxzQkFBc0IsQ0FBQyxTQUFTLENBQUM7SUFDN0YsQ0FBQztJQWhDRCwrQkFBK0I7SUFDakIseUNBQWtCLEdBQWhDLFVBQWlDLElBQThDO1FBQzNFLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsa0JBQWtCLENBQUMsZUFBZSxDQUFDLEtBQUssa0JBQWtCLENBQUMsZUFBZSxDQUFDO0lBQ25HLENBQUM7SUFFYSwrQkFBUSxHQUF0QixVQUF1QixJQUE4QztRQUNqRSxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxHQUFHLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxLQUFLLGtCQUFrQixDQUFDLEtBQUssQ0FBQztJQUMvRSxDQUFDO0lBRWEsbUNBQVksR0FBMUIsVUFBMkIsSUFBOEM7UUFDckUsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxrQkFBa0IsQ0FBQyxT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QyxNQUFNLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN4QyxJQUFJLElBQUksa0JBQWtCLENBQUMsS0FBSyxDQUFDO1FBQ3JDLENBQUM7UUFFRCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztZQUNqQixJQUFJLElBQUksa0JBQWtCLENBQUMsU0FBUyxDQUFDO1FBQ3pDLENBQUM7UUFFRCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDNUIsSUFBSSxJQUFJLGtCQUFrQixDQUFDLFNBQVMsQ0FBQztRQUN6QyxDQUFDO1FBRUQsOEJBQThCO1FBRTlCLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0lBQ3RELENBQUM7SUE1TmMsb0NBQWEsR0FBRyxvQkFBb0IsQ0FBQztJQUNyQyxnQ0FBUyxHQUFHLGlCQUFpQixDQUFDO0lBQzlCLDZCQUFNLEdBQUcsUUFBUSxDQUFDO0lBQ2xCLGdDQUFTLEdBQUcsV0FBVyxDQUFDO0lBME4zQyw2QkFBQztDQTlORCxBQThOQyxDQTlOMkMsYUFBYSxHQThOeEQ7U0E5Tlksc0JBQXNCIiwiZmlsZSI6InBvd2Vyc2hlbGwtbm90aWZpY2F0aW9uLmpzIiwic291cmNlUm9vdCI6IkM6L0JBLzEzMjgvcy9pbmxpbmVTcmMvIn0=